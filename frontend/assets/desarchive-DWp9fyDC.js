import{_ as p,c as a,o as r,b as s,p as g,q as y,F as i,f as c,t as h,a as b,i as _}from"./index-BzoUKLuT.js";import{d as D}from"./es-CSMndH0g.js";const C={name:"EntregasView",data(){return{entregas:[],searchTerm:"",headerMapping:{desarchivoId:"ID Desarchivo",custodiaId:"ID Caja",clienteId:"ID Cliente",fechaDesarchivo:"Fecha Desarchivo",year:"Año",month:"Mes",day:"Día",pdfFileName:"Nombre PDF",pdfFullPath:"Ruta PDF",observaciones:"Observaciones",custodiaItem:"Objeto",custodiaRef1:"Referencia 1",custodiaRef2:"Referencia 2",custodiaRef3:"Referencia 3",custodiaEstado:"Estado",cliente_nombre:"Cliente",usuario_nombre:"Usuario",objeto:"Objeto",bodega:"Bodega",referencia1:"Referencia 1",referencia2:"Referencia 2",referencia3:"Referencia 3",estado:"Estado",modalidad:"Modalidad",direccion_entrega:"Dirección Entrega",fechaEstimada:"Fecha Estimada",urlPdf:"URL PDF"}}},computed:{displayedColumns(){const e=new Set;return this.entregas.forEach(t=>{Object.keys(t).forEach(d=>{e.add(d)})}),Array.from(e)},filteredData(){if(!this.searchTerm)return this.entregas;const e=this.searchTerm.toLowerCase();return this.entregas.filter(t=>this.displayedColumns.some(d=>{const l=t[d]||"";return String(l).toLowerCase().includes(e)}))}},methods:{getMappedHeader(e){return this.headerMapping[e]||e},formatCell(e){return e==null?"N/A":typeof e=="string"&&!isNaN(Date.parse(e))?D(e).locale("es").format("DD/MM/YYYY HH:mm"):String(e)},async fetchEntregas(){try{const e=await _.post("/api/entregas/listar",{clienteId:2});this.entregas=e.data.data||[]}catch(e){console.error("Error al obtener entregas:",e)}}},async mounted(){await this.fetchEntregas()}},E={class:"table-container"},R={class:"table table-sm table-bordered table-hover sticky-content"},F={class:"sticky-header"},I={key:0},M=["colspan"];function k(e,t,d,l,u,n){return r(),a("div",null,[t[1]||(t[1]=s("h2",null,"Listado de Entregas",-1)),g(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>u.searchTerm=o),placeholder:"Buscar...",class:"form-control mb-3"},null,512),[[y,u.searchTerm]]),s("div",E,[s("table",R,[s("thead",F,[s("tr",null,[(r(!0),a(i,null,c(n.displayedColumns,o=>(r(),a("th",{key:o},h(n.getMappedHeader(o)),1))),128))])]),s("tbody",null,[(r(!0),a(i,null,c(n.filteredData,(o,f)=>(r(),a("tr",{key:f},[(r(!0),a(i,null,c(n.displayedColumns,m=>(r(),a("td",{key:m},h(n.formatCell(o[m])),1))),128))]))),128)),n.filteredData.length===0?(r(),a("tr",I,[s("td",{colspan:n.displayedColumns.length,class:"text-center text-muted"}," No hay datos para mostrar. ",8,M)])):b("",!0)])])])])}const w=p(C,[["render",k],["__scopeId","data-v-9102d7ad"]]);export{w as default};
