import{_ as I,c as n,o as i,a as _,n as y,b as e,t as r,r as v,d as l,F as b,e as g,f as p,g as C,w as k,h as D,i as S,u as x,j as T,k as P,l as w}from"./index-BzoUKLuT.js";import{d as u}from"./es-CSMndH0g.js";const N={name:"DashboardCard",props:{name:{type:String,required:!0},total:{type:Number,required:!0},color:{type:String,default:"linear-gradient(135deg, #235ca4, #041e40)"},ancho:{type:String,default:"250px"},backgroundIcon:{type:String,default:""},typeCard:{type:Number,default:1}},computed:{cardStyle(){return{background:this.color,minWidth:this.ancho,height:this.typeCard===1?"200px":"100px"}}}},j={class:"card-content"},L={class:"card-text"},Y={class:"card-value1"},B={class:"card-title"},R={class:"card-icon1"},z={class:"card-content"},E={class:"card-text"},M={class:"card-value2"},A={class:"card-title"},V={class:"card-icon2"};function F(s,a,t,h,c,m){return i(),n(b,null,[t.typeCard===1?(i(),n("div",{key:0,class:"dashboard-card1 type1",style:y(m.cardStyle)},[e("div",j,[e("div",L,[e("h1",Y,r(t.total),1),e("h6",B,r(t.name),1)]),e("div",R,[t.backgroundIcon?(i(),n("i",{key:0,class:l(t.backgroundIcon),style:{color:"#fff","z-index":"0"}},null,2)):v(s.$slots,"default",{key:1},void 0,!0)])])],4)):_("",!0),t.typeCard===2?(i(),n("div",{key:1,class:"dashboard-card2 type2",style:y(m.cardStyle)},[e("div",z,[e("div",E,[e("h1",M,r(t.total),1),e("h6",A,r(t.name),1)]),e("div",V,[t.backgroundIcon?(i(),n("i",{key:0,class:l(t.backgroundIcon),style:{color:"#fff","z-index":"0"}},null,2)):v(s.$slots,"default",{key:1},void 0,!0)])])],4)):_("",!0)],64)}const q=I(N,[["render",F],["__scopeId","data-v-8d3ce6a9"]]),H={name:"Dashboard",components:{DashboardCard:q},data(){return{loaderStore:w(),themeStore:P(),authStore:T(),currentDate:u().format("dddd,DD/MM/YYYY"),currentTime:u().format("HH:mm:ss"),notes:"",cards1:[],cards2:[],transactions:[{id:1,company:"1",type:"Préstamo",date:"12/03/2025"},{id:2,company:"2",type:"Devolución",date:"12/03/2025"},{id:3,company:"3",type:"Transferencia",date:"11/03/2025"},{id:4,company:"4",type:"Préstamo",date:"10/03/2025"}],notifications:["10 Confirmacion de Recepcion pendiente.","2 Nueva Devolucion pendiente."],activityLog:["Usuario X inició sesión.","Se actualizó el inventario.","Nueva transacción registrada."],inventarios:[],totalCustodias:0,totalDisponible:0,totalDevolucionProgress:0,totalrecogidaProgress:0,totalPrestamo:0}},computed:{tabStore(){return x()},currentTab(){return this.tabStore.globalCurrentTab},timeIcon(){const s=u().hour();return s>=6&&s<18?["bi","bi-sun-fill","animated-sun"]:["bi","bi-moon-fill","animated-moon"]},greeting(){const s=u().hour();return s>=6&&s<12?"Buenos días":s>=12&&s<18?"Buenas tardes":"Buenas noches"},iconAnimationClass(){const s=u().hour();return s>=6&&s<18?"animated-sun":"animated-moon"},clienteNombre(){var s;return((s=this.authStore.user)==null?void 0:s.nombre)||localStorage.getItem("clienteNombre")||"Cliente"}},mounted:async function(){await this.fetchCustodias(),this.updateCards(),this.updateDateTime()},methods:{setTab(s){const a={Recepcion:"confirmarRecepcion",Devoluciones:"Devoluciones",Transferencias:"Transferencias"},t=Object.keys(a).find(h=>s.includes(h));t?(this.tabStore.setTab(a[t]),console.log(`🔄 Cambiando a la pestaña: ${a[t]}`)):console.warn("⚠️ Pestaña no reconocida:",s)},updateDateTime(){setInterval(()=>{this.currentDate=u().locale("es").format("dddd, DD/MM/YYYY").toUpperCase(),this.currentTime=u().locale("es").format("h:mm A")},1e3)},async fetchCustodias(){try{const s=this.authStore.clienteId,a=await S.post("/api/custodias/cliente",{clienteId:s});this.inventarios=a.data.map(t=>({id:t.id,objeto:t.item,bodega:t.bodega,ubicacionId:t.ubicacionId,clienteId:t.clienteId,referencia1:t.referencia1,referencia2:t.referencia2,referencia3:t.referencia3,estado:t.estado,baja:t.baja})),this.totalCustodias=this.inventarios.length,console.log("Total de custodias:",this.totalCustodias),this.totalDisponible=this.inventarios.filter(t=>t.estado.toLowerCase()==="disponible").length,this.totalDevolucionProgress=this.inventarios.filter(t=>t.estado.toLowerCase()==="devolución en progreso").length,this.totalrecogidaProgress=this.inventarios.filter(t=>t.estado.toLowerCase()==="solicitud de recogida en progreso").length,this.totalPrestamo=this.inventarios.filter(t=>{const h=t.estado.toLowerCase();return h==="solicitado"||h==="entrega confirmada"}).length,this.loaderStore.hideLoader()}catch(s){console.error("Error al obtener datos de Custodia:",s)}},updateCards(){this.cards1=[{title:"Total en Inventario",value:this.totalCustodias,subtitle:"Cajas totales en el sistema",backgroundIcon:"bi bi-safe-fill",type:1,color:"linear-gradient(135deg, #898989, #2a2a2a)"}],this.cards2=[{title:"Cajas en Bodega",value:this.totalDisponible,subtitle:"Disponibles en bodega",backgroundIcon:"bi bi-archive-fill",type:2,color:"linear-gradient(135deg, #235ca4, #041e40)"},{title:"Cajas Prestadas",value:this.totalPrestamo,subtitle:"En préstamo actualmente",backgroundIcon:"bi bi-buildings",type:2,color:"linear-gradient(135deg, #235ca4, #041e40)"},{title:"En Proceso de Devolucion",value:this.totalDevolucionProgress,subtitle:"Proceso de Devolucion",backgroundIcon:"bi bi-arrow-up-right-circle-fill",type:2,color:"linear-gradient(135deg, #235ca4, #041e40)"},{title:"En Proceso de Recogida",value:this.totalrecogidaProgress,subtitle:"Proceso de Recogidas",backgroundIcon:"bi bi-truck",type:2,color:"linear-gradient(135deg, #235ca4, #041e40)"}]}}},U={class:"dashboard-container"},O={class:"container"},W={class:"row mb-2 px-3 d-flex align-items-center"},X={class:"col d-flex align-items-center"},G={class:"modern-title shimmer-text display-4 text-primary mb-0"},J={class:"col d-flex justify-content-end align-items-baseline mt-4"},K={class:"modern-subtitle fs-4",style:{color:"#d9d9d9"}},Q={class:"row mb-4"},Z={class:"col-4"},$={class:"col-8"},ee={class:"row"},te={class:"row"},se={class:"col-md-6"},oe={class:"card-body p-0",style:{height:"fit-content !important"}},ae={class:"text-center"},ne={class:"text-center"},ie={class:"text-center"},re={class:"text-center"},ce={class:"col-md-6"},le={class:"card-body m-0 p-0",style:{height:"fit-content !important"}},de={class:"list-group custom-notifications m-0 p-2"},ue=["onClick"];function he(s,a,t,h,c,m){const f=D("DashboardCard");return i(),n("div",U,[e("div",O,[e("div",W,[e("div",X,[e("h1",G,r(m.greeting)+", "+r(m.clienteNombre.split(" ")[0])+"! ",1)]),e("div",J,[e("span",K,[g(r(c.currentDate)+" ",1),a[0]||(a[0]=e("i",{class:"bi bi-clock ms-3"},null,-1)),g(" "+r(c.currentTime),1)])]),a[1]||(a[1]=e("hr",{class:"mt-2"},null,-1))]),e("div",Q,[e("div",Z,[(i(!0),n(b,null,p(c.cards1,(o,d)=>(i(),n("div",{class:"mb-3",key:d},[C(f,{name:o.title,total:o.value,color:o.color,ancho:o.ancho,backgroundIcon:o.backgroundIcon,typeCard:o.type},{default:k(()=>[e("i",{class:l(o.iconClass)},null,2)]),_:2},1032,["name","total","color","ancho","backgroundIcon","typeCard"])]))),128))]),e("div",$,[e("div",ee,[(i(!0),n(b,null,p(c.cards2,(o,d)=>(i(),n("div",{class:"col-6 mb-3",key:d},[C(f,{name:o.title,total:o.value,color:o.color,ancho:o.ancho,backgroundIcon:o.backgroundIcon,typeCard:o.type},{default:k(()=>[e("i",{class:l(o.iconClass)},null,2)]),_:2},1032,["name","total","color","ancho","backgroundIcon","typeCard"])]))),128))])])]),e("div",te,[e("div",se,[e("div",{class:l(["card mb-4",{"card-dark-custom":c.themeStore.theme==="dark"}])},[a[3]||(a[3]=e("div",{class:"card-header",style:{height:"fit-content !important"}},[e("i",{class:"bi bi-inboxes me-2"}),g(" Actividad Reciente ")],-1)),e("div",oe,[e("table",{class:l(["table table-sm table-striped mb-0 table-header",{"table-dark-custom":c.themeStore.theme==="dark"}])},[a[2]||(a[2]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"ID"),e("th",{class:"text-center"},"Consecutivo"),e("th",{class:"text-center"},"Tipo"),e("th",{class:"text-center"},"Fecha")])],-1)),e("tbody",null,[(i(!0),n(b,null,p(c.transactions,(o,d)=>(i(),n("tr",{key:d},[e("td",ae,r(o.id),1),e("td",ne,r(o.company),1),e("td",ie,r(o.type),1),e("td",re,r(o.date),1)]))),128))])],2)])],2)]),e("div",ce,[e("div",{class:l(["card mb-4",{"card-dark-custom":c.themeStore.theme==="dark"}])},[a[5]||(a[5]=e("div",{class:"card-header",style:{height:"fit-content !important"}},[e("i",{class:"bi bi-megaphone me-2"}),g("Notificaciones ")],-1)),e("div",le,[e("ul",de,[(i(!0),n(b,null,p(c.notifications,(o,d)=>(i(),n("li",{class:l(["list-group-item hand-pointer d-flex align-items-center m-1 shadow-sm",c.themeStore.theme==="dark"?"list-group-item-dark":"list-group-item-light"]),key:d,onClick:me=>m.setTab(o)},[a[4]||(a[4]=e("i",{class:"bi bi-bell-fill me-2 text-warning"},null,-1)),e("span",null,r(o),1)],10,ue))),128))])])],2)])])])])}const pe=I(H,[["render",he],["__scopeId","data-v-a54b3d4d"]]);export{pe as default};
